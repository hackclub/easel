# Function Hell


*Requires [Node.js](https://nodejs.org/en/download/) to run transpiled code*

## Overview
Function Hell is a programming language focused entirely on functions. Variables in Function Hell can only be assigned to functions, not literals. Consider it a creative constraint.

[![asciicast](https://asciinema.org/a/tggMKQL39QSFB8orl271R2DIB.svg)](https://asciinema.org/a/tggMKQL39QSFB8orl271R2DIB)


## Building

### Compiler binary

1. Create the build directory with `mkdir build`
2. Enter the build directory with `cd build`
3. Run `cmake ..`
4. Run `make`, `ninja`, or `msbuild` depending on your platform and what was generated by CMake
5. The executable will be in the build/bin directory as fnhell
6. Run the executable with `./fnhell` on Unix-like systems or `fnhell` on Windows

### Editor

1. Enter the editor directory with `cd editor`
2. Run `npm install`
3. Run `npm start` to start the editor
4. If you want to build the editor, run `npm run build-mac`, `npm run build-win`, or `npm run build-linux` depending on your platform
5. The executable will be in the editor/build directory



### fnhell CLI options
- `-h`, `--help`: Print help information and exit.
- `-o <file>`: Specify the output file name (default is `output.js`).
- `-r`: Run the output file after processing.
- `--noTranspile`: Disable the transpilation step.
- `--printTokens`: Print the tokens generated by the tokenizer.
- `--printAST`: Print the Abstract Syntax Tree (AST) after parsing.
- `--noTypeCheck`: Disable the type checking step.
- `--log`: Enable logging of the processing steps.

### Example



# Language Features

## Syntax
Function Definition
In Function Hell, functions are defined and assigned to variables with a specific syntax. Here is the general structure:

```go
var <return_type> <variable_name> = <return_type> <<parameter_type> <parameter_name>, ...> {
    <function_body>
}
```
Here is an example demonstrating the assignment of a function that adds two integers:

```go
var int x = int <int a, int b> { 
    ret a + b
}
```

`var <return_type> <variable_name>`: Declares a variable with the specified return type and name.
Example: var int x declares a variable x that returns an integer.

### Function Assignment:
`var int x = int <int a, int b> { ret a + b }` assigns a function that takes two integers a and b, adds them, and returns the result.

Variables can be reassigned to new functions, but the return type must match the original declaration.


### Function Body:

The function body contains the code to be executed when the function is called. It follows the same general structure as found in other programming languages, but with simplified syntax.
Example: `{ ret a + b }` contains the logic to return the sum of a and b.

### DataTypes:

Function Hell supports the following data types:

- `int`: Integer data type `42`
- `float`: Floating-point data type `3.14`
- `string`: String data type `"hello, world"`
- `bool`: Boolean data type, `true` or `false`
- `void`: Void data type (no return value)
- `type[]`: List of the specified type `{1, 2, 3}`


### If-Else Statements:

Function Hell supports if-else statements for conditional execution of code. Here is the general structure:

```go
if (<condition>) {
    <code_block>
}
else if (<condition>) {
    <code_block>
}
else {
    <code_block>
}
```

### For/While loops

Function Hell does not provide any built-in loops. Instead, recursion is used to achieve looping behavior. Here is an example of a recursive function that up to a given number:

```go
var void count = void <int n, int i> {
    if (i < n) {
        log with (i)
        ^count with (int <> { ret n }, int <> { ret ^i + 1 })
    }
}
```

### Function Calls:

To call a function, use the following syntax:

```go
<function_name> with (<parameter_value>, ...)
```

When a variable is accessed, it's function will be automatically called with no parameters

```go
var int x = int <> { ret 42 }

x // 42
```

### Variable Captures:

Variables in higher scopes than the function when it's defined can be accessed within the function. This is called a variable capture. It is done by using the `^` operator before the variable name.

```go
var int x = int <> { ret 42 }

var int y = int <> { 
    ret ^x // 42
}
```

### Lists:

Lists, like in JavaScript or Python can be added to or taken from without worry.
They are defined as `<datatype>{elem1,elem2,elem3}`

```go
var int[] x = int[] <> { // This function returns a list of integers (int[])
    ret int{1,2,3,4,5}
}
```


### Logging:

To print output to the console, use the `log` function:

```go
log with (string <> { ret "Hello, World!"}) // Outputs: Hello, World!
```

### Comments:

Comments in Function Hell are denoted by `//`.

```go
// This is a comment
```

## More Examples
Function to Subtract Two Numbers
```go
var int subtract = int <int a, int b> { 
    ret a - b
}
```
Function to Multiply Two Numbers
```go
var int multiply = int <int a, int b> { 
    ret a * b
}
```
Function with No Parameters
```go
var int constant = int <> { 
    ret 42
}
```

The classic "fizzbuzz" program

```go
var void fizzbuzz = void <int n, int j> {
    if (j % 15 == 0) {
        log with (string <> { ret "FizzBuzz" })
    }
    else if (j % 5 == 0){
        log with (string <> { ret "Buzz" })
    }
    else if (j % 3 == 0){
        log with (string <> { ret "Fizz" })
    }
    else {
        log with (j)
    }
    if (j < n) {
        ^fizzbuzz with (int <> { ret ^n } , int <> { ret ^j + 1 })
    }
}

fizzbuzz with (int <> { ret 100 }, int <> { ret 0 })
```


## Standard Library

The standard library provides many functions that make life easier for the programmer. The full list includes

* `fileRead`: Reads a file synchronously, fileRead with (path) is equivalent to fs.readFileSync(path, 'utf8')
* `fileWrite`: Writes data to a file synchronously, fileWrite with (path, data) is equivalent to fs.writeFileSync(path(), data(), 'utf8')
* `fileAppend`: Appends data to a file synchronously, fileAppend with (path, data) is equivalent to fs.appendFileSync(path(), data(), 'utf8')
* `log`: Print to stdout, log with (x) is equivalent to print(x()) in Python
* `at`: Returns the value at the specified index in a string or list and returns the resulting list, at with (x, index) is equivalent to x()[index()] in C++, Python, etc.
* `push`: Appends to a list and retuns the resulting array, push with (x, val) is equivalent to return x().push(val) in Python
* `remove`: Removes an element at a specific index and returns the resulting list, remove with (x, index) is equivalent to x().splice(index(), 1) in JavaScript
* `listOf`: Creates a list with a specified value and length, listOf with (val, length) is equivalent to Array(length()).fill(val()) in JavaScript
* `setAt`: Sets the value at a specified index and returns the resulting list, setAt with (x, index, val) is equivalent to x[index] = val in JavaScript
* `sin`: Returns the sine of a radian value, sin with (x) is equivalent to Math.sin(x()) in JavaScript
* `cos`: Returns the cosine of a radian value, cos with (x) is equivalent to Math.cos(x()) in JavaScript
* `tan`: Returns the tangent of a radian value, tan with (x) is equivalent to Math.tan(x()) in JavaScript
* `abs`: Returns the absolute value, abs with (x) is equivalent to Math.abs(x()) in JavaScript
* `parseint`: Converts a string to an integer, parseint with (x) is equivalent to parseInt(x()) in JavaScript
* `parsefloat`: Converts a string to a float, parsefloat with (x) is equivalent to parseFloat(x()) in JavaScript
* `len`: Returns the length of a string or list, len with (x) is equivalent to x().length in JavaScript
* `str`: Converts a value to a string, str with (x) is equivalent to x().toString() in JavaScript
* `sqrt`: Returns the square root of a number, sqrt with (x) is equivalent to Math.sqrt(x()) in JavaScript
* `PI`: Returns the value of PI, equivalent to Math.PI in JavaScript


\* Note: There may be additional functions or language features not listed here. 